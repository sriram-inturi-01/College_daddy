name: PR Auto Comment & Label

on:
  pull_request:
    types: [opened, closed]

jobs:
  pr_feedback:
    runs-on: ubuntu-latest
    steps:
      - name: Add comment when PR is opened
        if: github.event.action == 'opened'
        uses: peter-evans/create-or-update-comment@v3
        with:
          issue-number: ${{ github.event.pull_request.number }}
          body: |
            ğŸ‘‹ **Thanks for contributing to College Daddy!**

            Your pull request has been received and is under review.  

            Please make sure you've:

            - Followed the project's contribution guidelines.

            - Linked the related issue (if applicable).

            - Verified your changes locally.

            â­ If you find this project helpful, consider **starring the repo** â€” it supports open-source work like yours!

      - name: Add PR labels on open
        if: github.event.action == 'opened'
        uses: actions-ecosystem/action-add-labels@v1
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          labels: |
            awaiting review
            contribution

      - name: Add thank-you comment when merged
        if: github.event.action == 'closed' && github.event.pull_request.merged == true
        uses: peter-evans/create-or-update-comment@v3
        with:
          issue-number: ${{ github.event.pull_request.number }}
          body: |
            ğŸ‰ **Your pull request has been successfully merged!**  

            Thank you for your contribution to **College Daddy** â€” every improvement helps make the platform better for students.  

            If you haven't already, please consider **starring the repo** to support the project.  

            See you in the next contribution! ğŸš€

      - name: Remove awaiting review label when merged
        if: github.event.action == 'closed' && github.event.pull_request.merged == true
        uses: actions-ecosystem/action-remove-labels@v1
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          labels: |
            awaiting review

